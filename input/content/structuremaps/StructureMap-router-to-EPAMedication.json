{
  "resourceType": "StructureMap",
  "id": "F2a3c4d5e6f704a8192b31c2d3e4f5601Structuremap29ddbcee",
  "url": "https://gematik.de/fhir/epa-medication/StructureDefinition/epa-medication/StructureMap/F2a3c4d5e6f704a8192b31c2d3e4f5601Structuremap",
  "name": "F2a3c4d5e6f704a8192b31c2d3e4f5601Structuremap",
  "status": "active",
  "version": "1.1",
  "date": "2025-11-28",
  "description": "Router StructureMap for KBV_PR_ERP_Medication_Compounding|1.3.2, KBV_PR_ERP_Medication_FreeText|1.3.2, KBV_PR_ERP_Medication_Ingredient|1.3.2, KBV_PR_ERP_Medication_PZN|1.3.2 -> EPAMedication|1.0.6-2",
  "structure": [
    {
      "url": "http://hl7.org/fhir/StructureDefinition/Medication",
      "mode": "source",
      "alias": "KBVPRERPMedicationCompounding"
    },
    {
      "url": "https://gematik.de/fhir/epa-medication/StructureDefinition/epa-medication",
      "mode": "target",
      "alias": "EPAMedication"
    }
  ],
  "group": [
    {
      "name": "F2a3c4d5e6f704a8192b31c2d3e4f5601Structuremap",
      "typeMode": "none",
      "documentation": "Router StructureMap for KBV_PR_ERP_Medication_Compounding|1.3.2, KBV_PR_ERP_Medication_FreeText|1.3.2, KBV_PR_ERP_Medication_Ingredient|1.3.2, KBV_PR_ERP_Medication_PZN|1.3.2 -> EPAMedication|1.0.6-2",
      "input": [
        {
          "name": "KBVPRERPMedicationCompounding",
          "type": "KBVPRERPMedicationCompounding",
          "mode": "source"
        },
        {
          "name": "EPAMedication",
          "type": "EPAMedication",
          "mode": "target"
        }
      ],
      "rule": [
        {
          "name": "RouteKbvPrErpMedicationCompounding",
          "documentation": "Routes resources constrained by KBV_PR_ERP_Medication_Compounding",
          "source": [
            {
              "context": "KBVPRERPMedicationCompounding",
              "condition": "meta.profile.exists(p | p.matches('https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Medication_Compounding.*'))",
              "type": "Medication",
              "variable": "KBVPRERPMedicationCompoundingKbvPrErpMedicationCompoundingRouted"
            }
          ],
          "rule": [
            {
              "name": "CallF2a3c4d5e6f704a8192b31c2d3e4f5601structuremapkbvprerpmedicat",
              "source": [
                {
                  "context": "KBVPRERPMedicationCompoundingKbvPrErpMedicationCompoundingRouted"
                }
              ],
              "dependent": [
                {
                  "name": "F2a3c4d5e6f704a8192b31c2d3e4f5601StructuremapKbvPrErpMedicationC",
                  "variable": [
                    "KBVPRERPMedicationCompoundingKbvPrErpMedicationCompoundingRouted",
                    "EPAMedication"
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "RouteKbvPrErpMedicationFreetext",
          "documentation": "Routes resources constrained by KBV_PR_ERP_Medication_FreeText",
          "source": [
            {
              "context": "KBVPRERPMedicationCompounding",
              "condition": "meta.profile.exists(p | p.matches('https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Medication_FreeText.*'))",
              "type": "Medication",
              "variable": "KBVPRERPMedicationCompoundingKbvPrErpMedicationFreetextRouted"
            }
          ],
          "rule": [
            {
              "name": "CallF2a3c4d5e6f704a8192b31c2d3e4f5601structuremapkbvprerpmedicat",
              "source": [
                {
                  "context": "KBVPRERPMedicationCompoundingKbvPrErpMedicationFreetextRouted"
                }
              ],
              "dependent": [
                {
                  "name": "F2a3c4d5e6f704a8192b31c2d3e4f5601StructuremapKbvPrErpMedicationF",
                  "variable": [
                    "KBVPRERPMedicationCompoundingKbvPrErpMedicationFreetextRouted",
                    "EPAMedication"
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "RouteKbvPrErpMedicationIngredient",
          "documentation": "Routes resources constrained by KBV_PR_ERP_Medication_Ingredient",
          "source": [
            {
              "context": "KBVPRERPMedicationCompounding",
              "condition": "meta.profile.exists(p | p.matches('https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Medication_Ingredient.*'))",
              "type": "Medication",
              "variable": "KBVPRERPMedicationCompoundingKbvPrErpMedicationIngredientRouted"
            }
          ],
          "rule": [
            {
              "name": "CallF2a3c4d5e6f704a8192b31c2d3e4f5601structuremapkbvprerpmedicat",
              "source": [
                {
                  "context": "KBVPRERPMedicationCompoundingKbvPrErpMedicationIngredientRouted"
                }
              ],
              "dependent": [
                {
                  "name": "F2a3c4d5e6f704a8192b31c2d3e4f5601StructuremapKbvPrErpMedicationI",
                  "variable": [
                    "KBVPRERPMedicationCompoundingKbvPrErpMedicationIngredientRouted",
                    "EPAMedication"
                  ]
                }
              ]
            }
          ]
        },
        {
          "name": "RouteKbvPrErpMedicationPzn",
          "documentation": "Routes resources constrained by KBV_PR_ERP_Medication_PZN",
          "source": [
            {
              "context": "KBVPRERPMedicationCompounding",
              "condition": "meta.profile.exists(p | p.matches('https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Medication_PZN.*'))",
              "type": "Medication",
              "variable": "KBVPRERPMedicationCompoundingKbvPrErpMedicationPznRouted"
            }
          ],
          "rule": [
            {
              "name": "CallF2a3c4d5e6f704a8192b31c2d3e4f5601structuremapkbvprerpmedicat",
              "source": [
                {
                  "context": "KBVPRERPMedicationCompoundingKbvPrErpMedicationPznRouted"
                }
              ],
              "dependent": [
                {
                  "name": "F2a3c4d5e6f704a8192b31c2d3e4f5601StructuremapKbvPrErpMedicationP",
                  "variable": [
                    "KBVPRERPMedicationCompoundingKbvPrErpMedicationPznRouted",
                    "EPAMedication"
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ],
  "import": [
    "https://gematik.de/fhir/epa-medication/StructureDefinition/epa-medication/StructureMap/F2a3c4d5e6f704a8192b31c2d3e4f5601StructuremapKbvPrErpMedicationC",
    "https://gematik.de/fhir/epa-medication/StructureDefinition/epa-medication/StructureMap/F2a3c4d5e6f704a8192b31c2d3e4f5601StructuremapKbvPrErpMedicationF",
    "https://gematik.de/fhir/epa-medication/StructureDefinition/epa-medication/StructureMap/F2a3c4d5e6f704a8192b31c2d3e4f5601StructuremapKbvPrErpMedicationI",
    "https://gematik.de/fhir/epa-medication/StructureDefinition/epa-medication/StructureMap/F2a3c4d5e6f704a8192b31c2d3e4f5601StructuremapKbvPrErpMedicationP"
  ]
}