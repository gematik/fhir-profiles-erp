{
  "resourceType": "StructureMap",
  "id": "KBVPrErpPrescriptionMap",
  "url": "https://gematik.de/fhir/structure-comparer/StructureMap/KBVPrErpPrescriptionMap",
  "name": "KBVPrErpPrescriptionMap",
  "status": "active",
  "version": "1.0",
  "date": "2025-12-16",
  "description": "Auto-generated StructureMap for KBV_PR_ERP_Prescription|1.4.0 -> EPAMedicationRequest|1.2.0",
  "structure": [
    {
      "url": "https://fhir.kbv.de/StructureDefinition/KBV_PR_ERP_Prescription",
      "mode": "source",
      "alias": "KBVPRERPPrescription"
    },
    {
      "url": "https://gematik.de/fhir/epa-medication/StructureDefinition/epa-medication-request",
      "mode": "target",
      "alias": "EPAMedicationRequest"
    }
  ],
  "group": [
    {
      "name": "KBVPrErpPrescriptionMap",
      "typeMode": "types",
      "documentation": "Mapping generated for KBV_PR_ERP_Prescription|1.4.0 -> EPAMedicationRequest|1.2.0",
      "input": [
        {
          "name": "KBVPRERPPrescription",
          "type": "KBVPRERPPrescription",
          "mode": "source"
        },
        {
          "name": "EPAMedicationRequest",
          "type": "EPAMedicationRequest",
          "mode": "target"
        }
      ],
      "rule": [
        {
          "name": "MedicationRequestAuthoredoncccaaca3",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPPrescription",
              "element": "authoredOn",
              "variable": "srcKBVPRERPPrescriptionAuthoredon3962f227"
            }
          ],
          "target": [
            {
              "context": "EPAMedicationRequest",
              "contextType": "variable",
              "element": "authoredOn",
              "variable": "tgtEPAMedicationRequestAuthoredonbb8b1afd",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "srcKBVPRERPPrescriptionAuthoredon3962f227"
                }
              ]
            }
          ]
        },
        {
          "name": "MedicationRequestBasedonc8b5003b",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPPrescription",
              "element": "basedOn",
              "variable": "srcKBVPRERPPrescriptionBasedon44096147"
            }
          ],
          "target": [
            {
              "context": "EPAMedicationRequest",
              "contextType": "variable",
              "element": "basedOn",
              "variable": "tgtEPAMedicationRequestBasedon1481cab7",
              "transform": "create",
              "parameter": [
                {
                  "valueString": "Reference"
                }
              ]
            }
          ],
          "rule": [
            {
              "name": "MedicationRequestBasedonIdc9c0bc41",
              "source": [
                {
                  "context": "srcKBVPRERPPrescriptionBasedon44096147",
                  "variable": "srcMedicationRequestBasedonIdc9c0bc41",
                  "element": "id"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationRequestBasedon1481cab7",
                  "contextType": "variable",
                  "element": "id",
                  "variable": "tgtMedicationRequestBasedonIdc9c0bc41",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationRequestBasedonIdc9c0bc41"
                    }
                  ]
                }
              ],
              "documentation": "Automatic copy"
            },
            {
              "name": "MedicationRequestBasedonIdentifier526dd928",
              "source": [
                {
                  "context": "srcKBVPRERPPrescriptionBasedon44096147",
                  "variable": "srcMedicationRequestBasedonIdentifier526dd928",
                  "element": "identifier"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationRequestBasedon1481cab7",
                  "contextType": "variable",
                  "element": "identifier",
                  "variable": "tgtMedicationRequestBasedonIdentifier526dd928",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationRequestBasedonIdentifier526dd928"
                    }
                  ]
                }
              ],
              "documentation": "Automatic copy"
            }
          ]
        },
        {
          "name": "MedicationRequestDispenserequestabc39b18",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPPrescription",
              "element": "dispenseRequest",
              "variable": "srcKBVPRERPPrescriptionDispenserequest1783274a"
            }
          ],
          "target": [
            {
              "context": "EPAMedicationRequest",
              "contextType": "variable",
              "element": "dispenseRequest",
              "variable": "tgtEPAMedicationRequestDispenserequest519b8c09",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "srcKBVPRERPPrescriptionDispenserequest1783274a"
                }
              ]
            }
          ],
          "rule": [
            {
              "name": "MedicationRequestDispenserequestExpectedsupplydurationaf6a6ca3",
              "source": [
                {
                  "context": "srcKBVPRERPPrescriptionDispenserequest1783274a",
                  "variable": "srcMedicationRequestDispenserequestExpectedsupplydurationaf6a6ca",
                  "element": "expectedSupplyDuration"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationRequestDispenserequest519b8c09",
                  "contextType": "variable",
                  "element": "expectedSupplyDuration",
                  "variable": "tgtMedicationRequestDispenserequestExpectedsupplydurationaf6a6ca",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationRequestDispenserequestExpectedsupplydurationaf6a6ca"
                    }
                  ]
                }
              ],
              "documentation": "Automatic copy"
            },
            {
              "name": "MedicationRequestDispenserequestId86de48fb",
              "source": [
                {
                  "context": "srcKBVPRERPPrescriptionDispenserequest1783274a",
                  "variable": "srcMedicationRequestDispenserequestId86de48fb",
                  "element": "id"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationRequestDispenserequest519b8c09",
                  "contextType": "variable",
                  "element": "id",
                  "variable": "tgtMedicationRequestDispenserequestId86de48fb",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationRequestDispenserequestId86de48fb"
                    }
                  ]
                }
              ],
              "documentation": "Automatic copy"
            },
            {
              "name": "MedicationRequestDispenserequestQuantity7f2ad2c9",
              "source": [
                {
                  "context": "srcKBVPRERPPrescriptionDispenserequest1783274a",
                  "variable": "srcMedicationRequestDispenserequestQuantity7f2ad2c9",
                  "element": "quantity"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationRequestDispenserequest519b8c09",
                  "contextType": "variable",
                  "element": "quantity",
                  "variable": "tgtMedicationRequestDispenserequestQuantity7f2ad2c9",
                  "transform": "create",
                  "parameter": [
                    {
                      "valueString": "Quantity"
                    }
                  ]
                }
              ],
              "documentation": "Automatic copy",
              "rule": [
                {
                  "name": "MedicationRequestDispenserequestQuantityIde562891d",
                  "source": [
                    {
                      "context": "srcMedicationRequestDispenserequestQuantity7f2ad2c9",
                      "variable": "srcMedicationRequestDispenserequestQuantityIde562891d",
                      "element": "id"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationRequestDispenserequestQuantity7f2ad2c9",
                      "contextType": "variable",
                      "element": "id",
                      "variable": "tgtMedicationRequestDispenserequestQuantityIde562891d",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationRequestDispenserequestQuantityIde562891d"
                        }
                      ]
                    }
                  ],
                  "documentation": "Automatic copy"
                },
                {
                  "name": "MedicationRequestDispenserequestQuantityUnit854264a3",
                  "source": [
                    {
                      "context": "srcMedicationRequestDispenserequestQuantity7f2ad2c9",
                      "variable": "srcMedicationRequestDispenserequestQuantityUnit854264a3",
                      "element": "unit"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationRequestDispenserequestQuantity7f2ad2c9",
                      "contextType": "variable",
                      "element": "unit",
                      "variable": "tgtMedicationRequestDispenserequestQuantityUnit854264a3",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationRequestDispenserequestQuantityUnit854264a3"
                        }
                      ]
                    }
                  ],
                  "documentation": "Automatic copy"
                },
                {
                  "name": "MedicationRequestDispenserequestQuantityValue2a50498c",
                  "source": [
                    {
                      "context": "srcMedicationRequestDispenserequestQuantity7f2ad2c9",
                      "variable": "srcMedicationRequestDispenserequestQuantityValue2a50498c",
                      "element": "value"
                    }
                  ],
                  "target": [
                    {
                      "context": "tgtMedicationRequestDispenserequestQuantity7f2ad2c9",
                      "contextType": "variable",
                      "element": "value",
                      "variable": "tgtMedicationRequestDispenserequestQuantityValue2a50498c",
                      "transform": "copy",
                      "parameter": [
                        {
                          "valueId": "srcMedicationRequestDispenserequestQuantityValue2a50498c"
                        }
                      ]
                    }
                  ],
                  "documentation": "Automatic copy"
                }
              ]
            }
          ]
        },
        {
          "name": "MedicationRequestDosageinstruction0c18f214",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPPrescription",
              "element": "dosageInstruction",
              "variable": "srcKBVPRERPPrescriptionDosageinstructionc10ce439"
            }
          ],
          "target": [
            {
              "context": "EPAMedicationRequest",
              "contextType": "variable",
              "element": "dosageInstruction",
              "variable": "tgtEPAMedicationRequestDosageinstructionc76ffbd5",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "srcKBVPRERPPrescriptionDosageinstructionc10ce439"
                }
              ]
            }
          ]
        },
        {
          "name": "MedicationRequestInsurance8b499ebd",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPPrescription",
              "element": "insurance",
              "variable": "srcKBVPRERPPrescriptionInsurance97877d04"
            }
          ],
          "target": [
            {
              "context": "EPAMedicationRequest",
              "contextType": "variable",
              "element": "insurance",
              "variable": "tgtEPAMedicationRequestInsurance9fe43701",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "srcKBVPRERPPrescriptionInsurance97877d04"
                }
              ]
            }
          ]
        },
        {
          "name": "MedicationRequestIntentd6f3b441",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPPrescription",
              "element": "intent",
              "variable": "srcKBVPRERPPrescriptionIntentd287d5c0"
            }
          ],
          "target": [
            {
              "context": "EPAMedicationRequest",
              "contextType": "variable",
              "element": "intent",
              "variable": "tgtEPAMedicationRequestIntentc2c09deb",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "srcKBVPRERPPrescriptionIntentd287d5c0"
                }
              ]
            }
          ]
        },
        {
          "name": "MedicationRequestMedicationX2aac9f24",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPPrescription",
              "element": "medication",
              "variable": "srcKBVPRERPPrescriptionMedicationX56677694"
            }
          ],
          "target": [
            {
              "context": "EPAMedicationRequest",
              "contextType": "variable",
              "element": "medication",
              "variable": "tgtEPAMedicationRequestMedicationXb2342a1d",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "srcKBVPRERPPrescriptionMedicationX56677694"
                }
              ]
            }
          ]
        },
        {
          "name": "MedicationRequestMetaProfile56c958a8",
          "target": [
            {
              "context": "EPAMedicationRequest",
              "element": "meta",
              "variable": "tgtEPAMedicationRequestMeta55fad1b0",
              "contextType": "variable"
            }
          ],
          "rule": [
            {
              "name": "MedicationRequestMetaProfile56c958a8",
              "documentation": "Fixed value 'https://gematik.de/fhir/epa-medication/StructureDefinition/epa-medication-request'",
              "source": [
                {
                  "context": "KBVPRERPPrescription"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationRequestMeta55fad1b0",
                  "contextType": "variable",
                  "element": "profile",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueString": "https://gematik.de/fhir/epa-medication/StructureDefinition/epa-medication-request"
                    }
                  ]
                }
              ]
            }
          ],
          "source": [
            {
              "context": "KBVPRERPPrescription"
            }
          ]
        },
        {
          "name": "MedicationRequestNote3f48e22b",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPPrescription",
              "element": "note",
              "variable": "srcKBVPRERPPrescriptionNote271cad5f"
            }
          ],
          "target": [
            {
              "context": "EPAMedicationRequest",
              "contextType": "variable",
              "element": "note",
              "variable": "tgtEPAMedicationRequestNote7f5e9d21",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "srcKBVPRERPPrescriptionNote271cad5f"
                }
              ]
            }
          ],
          "rule": [
            {
              "name": "MedicationRequestNoteId47dca6aa",
              "source": [
                {
                  "context": "srcKBVPRERPPrescriptionNote271cad5f",
                  "variable": "srcMedicationRequestNoteId47dca6aa",
                  "element": "id"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationRequestNote7f5e9d21",
                  "contextType": "variable",
                  "element": "id",
                  "variable": "tgtMedicationRequestNoteId47dca6aa",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationRequestNoteId47dca6aa"
                    }
                  ]
                }
              ],
              "documentation": "Automatic copy"
            },
            {
              "name": "MedicationRequestNoteText729cac67",
              "source": [
                {
                  "context": "srcKBVPRERPPrescriptionNote271cad5f",
                  "variable": "srcMedicationRequestNoteText729cac67",
                  "element": "text"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationRequestNote7f5e9d21",
                  "contextType": "variable",
                  "element": "text",
                  "variable": "tgtMedicationRequestNoteText729cac67",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationRequestNoteText729cac67"
                    }
                  ]
                }
              ],
              "documentation": "Automatic copy"
            }
          ]
        },
        {
          "name": "MedicationRequestRequester3e498d80",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPPrescription",
              "element": "requester",
              "variable": "srcKBVPRERPPrescriptionRequester66a1f0a5"
            }
          ],
          "target": [
            {
              "context": "EPAMedicationRequest",
              "contextType": "variable",
              "element": "requester",
              "variable": "tgtEPAMedicationRequestRequester76629bb4",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "srcKBVPRERPPrescriptionRequester66a1f0a5"
                }
              ]
            }
          ]
        },
        {
          "name": "MedicationRequestStatus67a37e7d",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPPrescription",
              "element": "status",
              "variable": "srcKBVPRERPPrescriptionStatusdacc71a5"
            }
          ],
          "target": [
            {
              "context": "EPAMedicationRequest",
              "contextType": "variable",
              "element": "status",
              "variable": "tgtEPAMedicationRequestStatuse5522c01",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "srcKBVPRERPPrescriptionStatusdacc71a5"
                }
              ]
            }
          ]
        },
        {
          "name": "MedicationRequestSubjectfe47ad58",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPPrescription",
              "element": "subject",
              "variable": "srcKBVPRERPPrescriptionSubjectb79dbef0"
            }
          ],
          "target": [
            {
              "context": "EPAMedicationRequest",
              "contextType": "variable",
              "element": "subject",
              "variable": "tgtEPAMedicationRequestSubject8a8bf8a9",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "srcKBVPRERPPrescriptionSubjectb79dbef0"
                }
              ]
            }
          ],
          "rule": [
            {
              "name": "MedicationRequestSubjectId30658f9f",
              "source": [
                {
                  "context": "srcKBVPRERPPrescriptionSubjectb79dbef0",
                  "variable": "srcMedicationRequestSubjectId30658f9f",
                  "element": "id"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationRequestSubject8a8bf8a9",
                  "contextType": "variable",
                  "element": "id",
                  "variable": "tgtMedicationRequestSubjectId30658f9f",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationRequestSubjectId30658f9f"
                    }
                  ]
                }
              ],
              "documentation": "Automatic copy"
            },
            {
              "name": "MedicationRequestSubjectReference23286ed1",
              "source": [
                {
                  "context": "srcKBVPRERPPrescriptionSubjectb79dbef0",
                  "variable": "srcMedicationRequestSubjectReference23286ed1",
                  "element": "reference"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationRequestSubject8a8bf8a9",
                  "contextType": "variable",
                  "element": "reference",
                  "variable": "tgtMedicationRequestSubjectReference23286ed1",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationRequestSubjectReference23286ed1"
                    }
                  ]
                }
              ],
              "documentation": "Automatic copy"
            }
          ]
        },
        {
          "name": "MedicationRequestSubstitution5015c761",
          "documentation": "Automatic copy",
          "source": [
            {
              "context": "KBVPRERPPrescription",
              "element": "substitution",
              "variable": "srcKBVPRERPPrescriptionSubstitution3af41d78"
            }
          ],
          "target": [
            {
              "context": "EPAMedicationRequest",
              "contextType": "variable",
              "element": "substitution",
              "variable": "tgtEPAMedicationRequestSubstitution4b4fd116",
              "transform": "copy",
              "parameter": [
                {
                  "valueId": "srcKBVPRERPPrescriptionSubstitution3af41d78"
                }
              ]
            }
          ],
          "rule": [
            {
              "name": "MedicationRequestSubstitutionAllowedX8ca49a42",
              "source": [
                {
                  "context": "srcKBVPRERPPrescriptionSubstitution3af41d78",
                  "variable": "srcMedicationRequestSubstitutionAllowedX8ca49a42",
                  "element": "allowed"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationRequestSubstitution4b4fd116",
                  "contextType": "variable",
                  "element": "allowed",
                  "variable": "tgtMedicationRequestSubstitutionAllowedX8ca49a42",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationRequestSubstitutionAllowedX8ca49a42"
                    }
                  ]
                }
              ],
              "documentation": "Automatic copy"
            },
            {
              "name": "MedicationRequestSubstitutionIddce69090",
              "source": [
                {
                  "context": "srcKBVPRERPPrescriptionSubstitution3af41d78",
                  "variable": "srcMedicationRequestSubstitutionIddce69090",
                  "element": "id"
                }
              ],
              "target": [
                {
                  "context": "tgtEPAMedicationRequestSubstitution4b4fd116",
                  "contextType": "variable",
                  "element": "id",
                  "variable": "tgtMedicationRequestSubstitutionIddce69090",
                  "transform": "copy",
                  "parameter": [
                    {
                      "valueId": "srcMedicationRequestSubstitutionIddce69090"
                    }
                  ]
                }
              ],
              "documentation": "Automatic copy"
            }
          ]
        }
      ]
    }
  ]
}